{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ETPau\\\\Documents\\\\GitHub\\\\NeuroPlex-Nexus\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport UserIntervention from './UserIntervention';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst App = () => {\n  _s();\n  var _history$all;\n  const [history, setHistory] = useState(null);\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchHistory();\n  }, []);\n  const fetchHistory = async (rootId = null) => {\n    try {\n      setLoading(true);\n      const response = await axios.get('http://localhost:5000/api/get_history', {\n        params: {\n          root_id: rootId\n        }\n      });\n      if (response.data.status === 'success') {\n        const historyData = response.data.history;\n        setHistory({\n          current: historyData[0] || {\n            step_id: 'new',\n            content: '新建协作流程',\n            author: 'system'\n          },\n          all: historyData\n        });\n      }\n    } catch (err) {\n      setError(err.message);\n      console.error('获取历史记录失败:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleHistoryUpdate = async () => {\n    var _history$current;\n    await fetchHistory(history === null || history === void 0 ? void 0 : (_history$current = history.current) === null || _history$current === void 0 ? void 0 : _history$current.step_id);\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u52A0\\u8F7D\\u4E2D...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 25\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [\"\\u9519\\u8BEF: \", error]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"NeuraCollab \\u534F\\u4F5C\\u5E73\\u53F0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }, this), history && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"history-panel\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u534F\\u4F5C\\u5386\\u53F2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 25\n        }, this), (_history$all = history.all) === null || _history$all === void 0 ? void 0 : _history$all.map(entry => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"history-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"author\",\n            children: entry.author\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content\",\n            children: entry.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 33\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"timestamp\",\n            children: new Date(entry.timestamp).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 33\n          }, this)]\n        }, entry.step_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 29\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(UserIntervention, {\n        history: history,\n        onUpdate: handleHistoryUpdate\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 47,\n    columnNumber: 9\n  }, this);\n};\n_s(App, \"8gqzy96C9wtqmPx+dgWnib81vIo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","axios","UserIntervention","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","_history$all","history","setHistory","error","setError","loading","setLoading","fetchHistory","rootId","response","get","params","root_id","data","status","historyData","current","step_id","content","author","all","err","message","console","handleHistoryUpdate","_history$current","children","fileName","_jsxFileName","lineNumber","columnNumber","className","map","entry","Date","timestamp","toLocaleString","onUpdate","_c","$RefreshReg$"],"sources":["C:/Users/ETPau/Documents/GitHub/NeuroPlex-Nexus/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport UserIntervention from './UserIntervention';\r\n\r\nconst App = () => {\r\n    const [history, setHistory] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchHistory();\r\n    }, []);\r\n\r\n    const fetchHistory = async (rootId = null) => {\r\n        try {\r\n            setLoading(true);\r\n            const response = await axios.get('http://localhost:5000/api/get_history', {\r\n                params: { root_id: rootId }\r\n            });\r\n            if (response.data.status === 'success') {\r\n                const historyData = response.data.history;\r\n                setHistory({\r\n                    current: historyData[0] || {\r\n                        step_id: 'new',\r\n                        content: '新建协作流程',\r\n                        author: 'system'\r\n                    },\r\n                    all: historyData\r\n                });\r\n            }\r\n        } catch (err) {\r\n            setError(err.message);\r\n            console.error('获取历史记录失败:', err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleHistoryUpdate = async () => {\r\n        await fetchHistory(history?.current?.step_id);\r\n    };\r\n\r\n    if (loading) return <div>加载中...</div>;\r\n    if (error) return <div>错误: {error}</div>;\r\n\r\n    return (\r\n        <div className=\"app-container\">\r\n            <h1>NeuraCollab 协作平台</h1>\r\n            {history && (\r\n                <>\r\n                    <div className=\"history-panel\">\r\n                        <h2>协作历史</h2>\r\n                        {history.all?.map(entry => (\r\n                            <div key={entry.step_id} className=\"history-item\">\r\n                                <div className=\"author\">{entry.author}</div>\r\n                                <div className=\"content\">{entry.content}</div>\r\n                                <div className=\"timestamp\">{new Date(entry.timestamp).toLocaleString()}</div>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                    <UserIntervention \r\n                        history={history} \r\n                        onUpdate={handleHistoryUpdate}\r\n                    />\r\n                </>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAClD,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,gBAAgB,MAAM,oBAAoB;AAAC,SAAAC,MAAA,IAAAC,OAAA,EAAAC,QAAA,IAAAC,SAAA;AAElD,MAAMC,GAAG,GAAGA,CAAA,KAAM;EAAAC,EAAA;EAAA,IAAAC,YAAA;EACd,MAAM,CAACC,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACa,KAAK,EAAEC,QAAQ,CAAC,GAAGd,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,IAAI,CAAC;EAE5CC,SAAS,CAAC,MAAM;IACZgB,YAAY,CAAC,CAAC;EAClB,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMA,YAAY,GAAG,MAAAA,CAAOC,MAAM,GAAG,IAAI,KAAK;IAC1C,IAAI;MACAF,UAAU,CAAC,IAAI,CAAC;MAChB,MAAMG,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,GAAG,CAAC,uCAAuC,EAAE;QACtEC,MAAM,EAAE;UAAEC,OAAO,EAAEJ;QAAO;MAC9B,CAAC,CAAC;MACF,IAAIC,QAAQ,CAACI,IAAI,CAACC,MAAM,KAAK,SAAS,EAAE;QACpC,MAAMC,WAAW,GAAGN,QAAQ,CAACI,IAAI,CAACZ,OAAO;QACzCC,UAAU,CAAC;UACPc,OAAO,EAAED,WAAW,CAAC,CAAC,CAAC,IAAI;YACvBE,OAAO,EAAE,KAAK;YACdC,OAAO,EAAE,QAAQ;YACjBC,MAAM,EAAE;UACZ,CAAC;UACDC,GAAG,EAAEL;QACT,CAAC,CAAC;MACN;IACJ,CAAC,CAAC,OAAOM,GAAG,EAAE;MACVjB,QAAQ,CAACiB,GAAG,CAACC,OAAO,CAAC;MACrBC,OAAO,CAACpB,KAAK,CAAC,WAAW,EAAEkB,GAAG,CAAC;IACnC,CAAC,SAAS;MACNf,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC;EAED,MAAMkB,mBAAmB,GAAG,MAAAA,CAAA,KAAY;IAAA,IAAAC,gBAAA;IACpC,MAAMlB,YAAY,CAACN,OAAO,aAAPA,OAAO,wBAAAwB,gBAAA,GAAPxB,OAAO,CAAEe,OAAO,cAAAS,gBAAA,uBAAhBA,gBAAA,CAAkBR,OAAO,CAAC;EACjD,CAAC;EAED,IAAIZ,OAAO,EAAE,oBAAOV,OAAA;IAAA+B,QAAA,EAAK;EAAM;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EACrC,IAAI3B,KAAK,EAAE,oBAAOR,OAAA;IAAA+B,QAAA,GAAK,gBAAI,EAACvB,KAAK;EAAA;IAAAwB,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAM,CAAC;EAExC,oBACInC,OAAA;IAAKoC,SAAS,EAAC,eAAe;IAAAL,QAAA,gBAC1B/B,OAAA;MAAA+B,QAAA,EAAI;IAAgB;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,EACxB7B,OAAO,iBACJN,OAAA,CAAAE,SAAA;MAAA6B,QAAA,gBACI/B,OAAA;QAAKoC,SAAS,EAAC,eAAe;QAAAL,QAAA,gBAC1B/B,OAAA;UAAA+B,QAAA,EAAI;QAAI;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,GAAA9B,YAAA,GACZC,OAAO,CAACmB,GAAG,cAAApB,YAAA,uBAAXA,YAAA,CAAagC,GAAG,CAACC,KAAK,iBACnBtC,OAAA;UAAyBoC,SAAS,EAAC,cAAc;UAAAL,QAAA,gBAC7C/B,OAAA;YAAKoC,SAAS,EAAC,QAAQ;YAAAL,QAAA,EAAEO,KAAK,CAACd;UAAM;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC5CnC,OAAA;YAAKoC,SAAS,EAAC,SAAS;YAAAL,QAAA,EAAEO,KAAK,CAACf;UAAO;YAAAS,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eAC9CnC,OAAA;YAAKoC,SAAS,EAAC,WAAW;YAAAL,QAAA,EAAE,IAAIQ,IAAI,CAACD,KAAK,CAACE,SAAS,CAAC,CAACC,cAAc,CAAC;UAAC;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAHvEG,KAAK,CAAChB,OAAO;UAAAU,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAIlB,CACR,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACD,CAAC,eACNnC,OAAA,CAACF,gBAAgB;QACbQ,OAAO,EAAEA,OAAQ;QACjBoC,QAAQ,EAAEb;MAAoB;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACjC,CAAC;IAAA,eACJ,CACL;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AAEd,CAAC;AAAC/B,EAAA,CAhEID,GAAG;AAAAwC,EAAA,GAAHxC,GAAG;AAkET,eAAeA,GAAG;AAAC,IAAAwC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const UserIntervention=_ref=>{let{history}=_ref;const[editableText,setText]=useState(history.current.content);const[selectedPrompt,setPrompt]=useState('');const handleSave=async()=>{try{await axios.post('http://localhost:5000/api/update_prompt',{content:editableText,prompt:selectedPrompt,parent_id:history.current.step_id,author:'user'});alert('修改已保存!');}catch(error){console.error('保存失败:',error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"intervention-panel\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"\\u6B65\\u9AA4 #\",history.current.step_id,\" \\u4EBA\\u5DE5\\u4FEE\\u8BA2\"]}),/*#__PURE__*/_jsx(\"textarea\",{value:editableText,onChange:e=>setText(e.target.value),rows:\"10\",cols:\"50\"}),/*#__PURE__*/_jsxs(\"select\",{value:selectedPrompt,onChange:e=>setPrompt(e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u9009\\u62E9\\u63D0\\u793A\\u8BCD\\u6A21\\u677F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"relay\",children:\"\\u63A5\\u529B\\u521B\\u4F5C\\u6A21\\u5F0F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"debate\",children:\"\\u8FA9\\u8BBA\\u6A21\\u5F0F\"}),/*#__PURE__*/_jsx(\"option\",{value:\"iterate\",children:\"\\u8FED\\u4EE3\\u4F18\\u5316\\u6A21\\u5F0F\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSave,children:\"\\u4FDD\\u5B58\\u4FEE\\u6539\"})]});};export default UserIntervention;","map":{"version":3,"names":["React","useState","axios","jsxs","_jsxs","jsx","_jsx","UserIntervention","_ref","history","editableText","setText","current","content","selectedPrompt","setPrompt","handleSave","post","prompt","parent_id","step_id","author","alert","error","console","className","children","value","onChange","e","target","rows","cols","onClick"],"sources":["C:/Users/ETPau/Documents/GitHub/NeuroPlex-Nexus/frontend/src/UserIntervention.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst UserIntervention = ({ history }) => {\r\n    const [editableText, setText] = useState(history.current.content);\r\n    const [selectedPrompt, setPrompt] = useState('');\r\n\r\n    const handleSave = async () => {\r\n        try {\r\n            await axios.post('http://localhost:5000/api/update_prompt', {\r\n                content: editableText,\r\n                prompt: selectedPrompt,\r\n                parent_id: history.current.step_id,\r\n                author: 'user'\r\n            });\r\n            alert('修改已保存!');\r\n        } catch (error) {\r\n            console.error('保存失败:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"intervention-panel\">\r\n            <h3>步骤 #{history.current.step_id} 人工修订</h3>\r\n            <textarea \r\n                value={editableText}\r\n                onChange={(e) => setText(e.target.value)}\r\n                rows=\"10\"\r\n                cols=\"50\"\r\n            />\r\n            <select \r\n                value={selectedPrompt}\r\n                onChange={(e) => setPrompt(e.target.value)}\r\n            >\r\n                <option value=\"\">选择提示词模板</option>\r\n                <option value=\"relay\">接力创作模式</option>\r\n                <option value=\"debate\">辩论模式</option>\r\n                <option value=\"iterate\">迭代优化模式</option>\r\n            </select>\r\n            <button onClick={handleSave}>保存修改</button>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserIntervention;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,IAAA,IAAAC,KAAA,CAAAC,GAAA,IAAAC,IAAA,yBAE1B,KAAM,CAAAC,gBAAgB,CAAGC,IAAA,EAAiB,IAAhB,CAAEC,OAAQ,CAAC,CAAAD,IAAA,CACjC,KAAM,CAACE,YAAY,CAAEC,OAAO,CAAC,CAAGV,QAAQ,CAACQ,OAAO,CAACG,OAAO,CAACC,OAAO,CAAC,CACjE,KAAM,CAACC,cAAc,CAAEC,SAAS,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAEhD,KAAM,CAAAe,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACA,KAAM,CAAAd,KAAK,CAACe,IAAI,CAAC,yCAAyC,CAAE,CACxDJ,OAAO,CAAEH,YAAY,CACrBQ,MAAM,CAAEJ,cAAc,CACtBK,SAAS,CAAEV,OAAO,CAACG,OAAO,CAACQ,OAAO,CAClCC,MAAM,CAAE,MACZ,CAAC,CAAC,CACFC,KAAK,CAAC,QAAQ,CAAC,CACnB,CAAE,MAAOC,KAAK,CAAE,CACZC,OAAO,CAACD,KAAK,CAAC,OAAO,CAAEA,KAAK,CAAC,CACjC,CACJ,CAAC,CAED,mBACInB,KAAA,QAAKqB,SAAS,CAAC,oBAAoB,CAAAC,QAAA,eAC/BtB,KAAA,OAAAsB,QAAA,EAAI,gBAAI,CAACjB,OAAO,CAACG,OAAO,CAACQ,OAAO,CAAC,2BAAK,EAAI,CAAC,cAC3Cd,IAAA,aACIqB,KAAK,CAAEjB,YAAa,CACpBkB,QAAQ,CAAGC,CAAC,EAAKlB,OAAO,CAACkB,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CACzCI,IAAI,CAAC,IAAI,CACTC,IAAI,CAAC,IAAI,CACZ,CAAC,cACF5B,KAAA,WACIuB,KAAK,CAAEb,cAAe,CACtBc,QAAQ,CAAGC,CAAC,EAAKd,SAAS,CAACc,CAAC,CAACC,MAAM,CAACH,KAAK,CAAE,CAAAD,QAAA,eAE3CpB,IAAA,WAAQqB,KAAK,CAAC,EAAE,CAAAD,QAAA,CAAC,4CAAO,CAAQ,CAAC,cACjCpB,IAAA,WAAQqB,KAAK,CAAC,OAAO,CAAAD,QAAA,CAAC,sCAAM,CAAQ,CAAC,cACrCpB,IAAA,WAAQqB,KAAK,CAAC,QAAQ,CAAAD,QAAA,CAAC,0BAAI,CAAQ,CAAC,cACpCpB,IAAA,WAAQqB,KAAK,CAAC,SAAS,CAAAD,QAAA,CAAC,sCAAM,CAAQ,CAAC,EACnC,CAAC,cACTpB,IAAA,WAAQ2B,OAAO,CAAEjB,UAAW,CAAAU,QAAA,CAAC,0BAAI,CAAQ,CAAC,EACzC,CAAC,CAEd,CAAC,CAED,cAAe,CAAAnB,gBAAgB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}